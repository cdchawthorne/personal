\documentclass{article}

\usepackage[margin=1in]{geometry}
\usepackage[mathletters]{ucs}
\usepackage[utf8x]{inputenc}
\usepackage[T1]{fontenc}
\usepackage[canadian]{babel}

\usepackage{amsmath, amssymb, microtype, tikz-cd, centernot, mathtools,
            csquotes, etoolbox}
\usepackage[log-declarations=false]{xparse}
\usepackage[shortlabels]{enumitem}

% Apparently order matters here
\usepackage{hyperref}
\usepackage{amsthm}
\usepackage[nameinlink]{cleveref}
\usepackage[retainorgcmds]{IEEEtrantools}

\hypersetup{
  colorlinks,
  linktoc=section,
  linkcolor=blue,
  citecolor=blue,
  urlcolor=blue,
}

% Better proof environment
% Suffers from the annoying flaw that the second parameter gets evaluated on
% exiting the environment, not entering; use an \edef before entering the
% environment to get around this.
\NewDocumentEnvironment{pf}{o o}{
  \IfValueTF{#1}{\begin{proof}[#1]}{\begin{proof}}
}{
    \let \oldqedsymbol \qedsymbol
    \IfValueTF{#2}{
      \renewcommand{\qedsymbol}{\oldqedsymbol \, #2}
    }{}
  \end{proof}
  \renewcommand{\qedsymbol}{\oldqedsymbol}
}

% \newtheorem replacement that internally labels all theorems and tracks the
% last theorem
\newcounter{smarttheorem:smarttheoremcounter}
\newcommand{\smarttheoremlabel}{%
  smarttheorem:\arabic{smarttheorem:smarttheoremcounter}%
}

\NewDocumentCommand{\newsmarttheorem}{m o m}{
  \IfNoValueTF{#2}{\newcounter{#1}}{}
  \newtheorem{hidden#1}[\IfValueTF{#2}{#2}{#1}]{#3}

  \NewDocumentEnvironment{#1}{o}{
    \IfNoValueTF{##1}{\begin{hidden#1}}{\begin{hidden#1}[{##1}]}
      \stepcounter{smarttheorem:smarttheoremcounter}
      \label{\smarttheoremlabel}
  }{
      \end{hidden#1}
  }
}

% Reference proof: tags the proof using Cref on either the label provided or
% the last smarttheorem
\NewDocumentEnvironment{rpf}{O{\proofname} O{\smarttheoremlabel}}{
  \edef \smarttheoremsavedlabel {#2}
  \begin{pf}[\IfValueTF{#1}{#1}{\proofname}][\Cref{\smarttheoremsavedlabel}]
}{
  \end{pf}
}

\NewDocumentEnvironment{lrpf}{O{\smarttheoremlabel}}{
  \begin{rpf}[Proof of \Cref{#1}][#1]
}{
  \end{rpf}
}

\newcommand{\plr}{\item[\((\implies)\)]}
\newcommand{\prl}{\item[\((\impliedby)\)]}

\NewDocumentEnvironment{ea}{O{rCl}}{
  \begin{IEEEeqnarray*}{#1}
}{
  \end{IEEEeqnarray*}
  \ignorespacesafterend
}

\NewDocumentEnvironment{tcd}{s}{
  \IfBooleanTF{#1}{\begin{equation}}{\[}
    \begin{tikzcd}
}{
    \end{tikzcd}
  \IfBooleanTF{#1}{\end{equation}}{\]}
  \ignorespacesafterend
}

\theoremstyle{definition}

\newcounter{case}
\newenvironment{caselist}{
  \setcounter{case}{0}\begin{description}
}{
  \end{description}
}

\newcommand \case {\setcounter{case}{\value{case}+1}\item[Case \thecase.]}

% Theorems
\newcounter{theoremcounter}
\theoremstyle{plain}
\newsmarttheorem{theorem}[theoremcounter]{Theorem}
\newsmarttheorem{lemma}[theoremcounter]{Lemma}
\newsmarttheorem{proposition}[theoremcounter]{Proposition}
\newsmarttheorem{claim}[theoremcounter]{Claim}
\newsmarttheorem{corollary}[theoremcounter]{Corollary}
\newsmarttheorem{fact}[theoremcounter]{Fact}
\newsmarttheorem{todo}{TODO}

\theoremstyle{definition}
\newsmarttheorem{definition}[theoremcounter]{Definition}
\newsmarttheorem{notation}[theoremcounter]{Notation}

\theoremstyle{remark}
\newsmarttheorem{question}[theoremcounter]{Question}
\newsmarttheorem{remark}[theoremcounter]{Remark}
\newsmarttheorem{conjecture}[theoremcounter]{Conjecture}
\newsmarttheorem{exercise}[theoremcounter]{Exercise}
\newsmarttheorem{example}[theoremcounter]{Example}

% Blackboard bold
\newcommand \bA {{\mathbb{A}}}
\newcommand \bC {{\mathbb{C}}}
\newcommand \bD {{\mathbb{D}}}
\newcommand \bF {{\mathbb{F}}}
\newcommand \bN {{\mathbb{N}}}
\newcommand \bP {{\mathbb{P}}}
\newcommand \bQ {{\mathbb{Q}}}
\newcommand \bR {{\mathbb{R}}}
\newcommand \bT {{\mathbb{T}}}
\newcommand \bZ {{\mathbb{Z}}}

% Math Calligraphy
\newcommand \cA {{\mathcal{A}}}
\newcommand \cB {{\mathcal{B}}}
\newcommand \cC {{\mathcal{C}}}
\newcommand \cD {{\mathcal{D}}}
\newcommand \cE {{\mathcal{E}}}
\newcommand \cF {{\mathcal{F}}}
\newcommand \cG {{\mathcal{G}}}
\newcommand \cH {{\mathcal{H}}}
\newcommand \cI {{\mathcal{I}}}
\newcommand \cJ {{\mathcal{J}}}
\newcommand \cK {{\mathcal{K}}}
\newcommand \cL {{\mathcal{L}}}
\newcommand \cM {{\mathcal{M}}}
\newcommand \cN {{\mathcal{N}}}
\newcommand \cO {{\mathcal{O}}}
\newcommand \cP {{\mathcal{P}}}
\newcommand \cQ {{\mathcal{Q}}}
\newcommand \cR {{\mathcal{R}}}
\newcommand \cS {{\mathcal{S}}}
\newcommand \cT {{\mathcal{T}}}
\newcommand \cU {{\mathcal{U}}}
\newcommand \cV {{\mathcal{V}}}
\newcommand \cW {{\mathcal{W}}}
\newcommand \cX {{\mathcal{X}}}
\newcommand \cY {{\mathcal{Y}}}
\newcommand \cZ {{\mathcal{Z}}}

% Aliases
\let \weirdepsilon \epsilon
\let \weirdphi \phi
\renewcommand \epsilon \varepsilon
\renewcommand \phi \varphi


\let \sharps \ss
\renewcommand \ss \subseteq
\newcommand \ssne \subsetneqq
\newcommand \sps \supseteq
\newcommand \spsne \supsetneqq
\newcommand \fss {\subseteq_{\mathrm{fin}}}

\newcommand \ra \rightarrow
\newcommand \hra \hookrightarrow
\newcommand \la \leftarrow
\newcommand \hla \hookleftarrow
\newcommand \lra \leftrightarrow
\newcommand \xra \xrightarrow

\newcommand \on  \operatorname
\newcommand \wh  \widehat
\newcommand \ol  \overline
\newcommand \ul  \underline

\newcommand \cnot \centernot
\newcommand \co \colon
\newcommand \sm \setminus
\newcommand \ep \epsilon
\newcommand \es \emptyset
\newcommand \rs \restriction
\newcommand \ip \implies
\newcommand \pe \preceq
\newcommand \se \succeq
\newcommand \wt \widetilde
\newcommand \ora \overrightarrow

\newcommand \thorn \th
\renewcommand \th {^\mathrm{th}}
\newcommand \telse {\text{else}}

\newcommand \lit [1] {\item[#1]}

\newenvironment{menumerate}{\mbox{}\begin{enumerate}}{\end{enumerate}}
\newenvironment{mitemize}{\mbox{}\begin{itemize}}{\end{itemize}}
\newenvironment{mdescription}{\mbox{}\begin{description}}{\end{description}}

% Delimiters
\DeclarePairedDelimiter \angs  \langle \rangle
\DeclarePairedDelimiter \abs \lvert \rvert
\DeclarePairedDelimiter \len \lvert \rvert
\DeclarePairedDelimiter \card \lvert \rvert
\DeclarePairedDelimiter \bars \lVert \rVert
\DeclarePairedDelimiter \norm \lVert \rVert
\DeclarePairedDelimiter \pars ( )
\DeclarePairedDelimiter \bracks [ ]
\DeclarePairedDelimiter \floor \lfloor \rfloor
\DeclarePairedDelimiter \ceil \lceil \rceil

\DeclarePairedDelimiterX{\set}[1]{\{}{\}}{\, #1 \,}

% Non-simple operators
\DeclareMathOperator \ch {char}
\DeclareMathOperator \im {Im}
\DeclareMathOperator \lspan {span}

% Simple operators
\DeclareMathOperator \dom {dom}
\DeclareMathOperator \ob {Ob}
\DeclareMathOperator \id {id}
\DeclareMathOperator \ran {Ran}
\DeclareMathOperator \sgn {sgn}
\DeclareMathOperator \rank {rank}
\DeclareMathOperator \tr {tr}

\title{}
\author{Christopher Hawthorne}
\date{cdchawth, 20387811}

\begin{document}
  \maketitle
\end{document}
